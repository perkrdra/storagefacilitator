<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Self-Storage Facility Planner</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="./favicon.svg" type="image/svg+xml">
    <link rel="alternate icon" href="./favicon.ico" type="image/x-icon">
  </head>
  <body style="background-color: #141d2c;">
    <div id="planner" class="p-4 font-sans">
      <!-- Header with Contact Section -->
      <div class="mb-8 flex justify-between items-center" style="margin-left: 80px; margin-right: 48px;">
        <div>
          <div class="mb-2">
            <img src="Logo_facility_planner.jpg" alt="Facility Planner Logo" style="max-width: 280px; height: auto;">
          </div>
        </div>
        
        <!-- Expert Consulting Button -->
        <a 
          href="/consulting" 
          class="inline-flex items-center px-4 py-2 rounded shadow-sm text-sm font-medium transition-all"
          style="background: #e3721d; color: #fff;"
          target="_blank"
        >
          <span class="mr-2">üë®‚Äçüíº</span>
          Expert Consulting
        </a>
      </div>

      <!-- Main Navigation Menu -->
      <div class="mb-4" style="margin-left: 80px; margin-right: 48px; margin-top: 40px;">
        <nav class="rounded-lg shadow-sm" style="background: #141d2c; border: 1px solid #141d2c;">
          <div class="flex overflow-x-auto">
            <button
              id="market-nav-btn"
              class="flex-1 px-6 py-4 text-center font-medium text-sm whitespace-nowrap transition-colors"
              style="border-bottom: 1px solid #EBF5EE; background: #141d2c; color: #fff; font-size: 18px; border-radius: 0;"
            >
              üìä Market Analysis
            </button>
            
            <button
              id="operational-nav-btn"
              class="flex-1 px-6 py-4 text-center font-medium "
              style="border-bottom: 2px solid transparent; background: #141d2c; color: #fff; font-size: 18px; border-radius: 0;"
            >
              ‚öôÔ∏è Operational Metrics
            </button>
            <button
              id="financial-nav-btn"
              class="flex-1 px-6 py-4 text-center font-medium text-sm whitespace-nowrap transition-colors"
              style="border-bottom: 2px solid transparent; background: #141d2c; color: #fff; font-size: 18px; border-radius: 0;"
            >
              üí∞ Financial Metrics
            </button>
            <button
              id="suppliers-nav-btn"
              class="flex-1 px-6 py-4 text-center font-medium text-sm whitespace-nowrap transition-colors"
              style="border-bottom: 2px solid transparent; background: #141d2c; color: #fff; font-size: 18px; border-radius: 0;"
            >
              üè¢ Suppliers & Resources
            </button>
          </div>
        </nav>
      </div>

        

        <!-- Key Metrics Cards -->

      <div class="rounded-lg p-3 mb-4" style="margin-left: 80px; margin-right: 48px; margin-top: 60px; background: #141d2c;">
          <h2 class="text-md font-medium mb-2" style="color: #e3721d;">Facility Planner Dashboard</h2>
          <div class="grid gap-3" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1">Total Area</h3>
              <p class="text-md font-bold" style="color: #283044;" mb-1" id="total-area-display">1500.0 m¬≤</p>
              <p class="text-xs" style="color: #283044;" mb-1">
                Rentable: <span id="rentable-area-display">0.0 m¬≤</span>
              </p>
              <p class="text-xs" style="color: #283044;" mb-1">
                Utilization: <span id="utilization-display">0.0%</span>
              </p>
              <input
                type="number"
                id="total-area-input"
                value="1500"
                min="25"
                step="1"
                class="border rounded px-2 py-1 w-full text-xs mt-3"
                style="background: #d2b564;"
                placeholder="Enter area in m¬≤"
              />
            </div>
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1">
                Monthly Revenue
              </h3>
              <p class="text-md font-bold" style="color: #283044;"" id="monthly-revenue-display">
                ‚Ç¨0.00
              </p>
              <p class="text-xs" style="color: #283044;" mt-1" id="occupancy-rate-note">
                85% occupancy
              </p>
            </div>
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1>
                Total Investment
              </h3>
              <p class="text-md font-bold" style="color: #283044;" mb-1" id="total-investment-display">
                ‚Ç¨0.00
              </p>
              <input
                type="number"
                id="total-investment-input"
                value="750000"
                min="10000"
                step="10000"
                class="border rounded px-2 py-1 w-full text-xs mt-3"
                style="background: #d2b564; opacity: 0.8;"
                placeholder="Enter investment amount"
              />
            </div>
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1>
                Break-even Timeline
              </h3>
              <p class="text-md font-bold" style="color: #283044;"" id="breakeven-timeline-display">
                0 years
              </p>
              <p class="text-xs" style="color: #283044;" mt-1">
                Time to recover investment
              </p>
            </div>
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1>
                Cost per m¬≤
              </h3>
              <p class="text-md font-bold" style="color: #283044;" id="cost-per-sqm-display">
                ‚Ç¨0.00/m¬≤
              </p>
              <p class="text-xs" style="color: #283044;" mt-1">
                Total: ‚Ç¨<span id="total-monthly-opex-display">1,700</span>
              </p>
            </div>
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1>
                Construction Cost per Unit
              </h3>
              <p class="text-md font-bold" style="color: #283044;"" id="construction-cost-per-unit-display">
                ‚Ç¨0.00
              </p>
              <p class="text-xs" style="color: #283044;" mt-1">
                Average build cost per unit
              </p>
            </div>
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1">
                Annual ROI
              </h3>
              <p class="text-md font-bold" style="color: #283044;"" id="annual-roi-display">
                0.0%
              </p>
              <p class="text-xs" style="color: #283044;" mt-1">
                Return on investment
              </p>
            </div>
            <div class="bg-white rounded p-4 shadow-sm" style="border: 1px solid #283044; background: #E3C980;">
              <h3 class="text-sm font-medium" style="color: #283044;" mb-1">
                Market Viability
              </h3>
              <p class="text-md font-bold" style="color: #283044;"" id="market-viability-display">
                75/100
              </p>
              <p class="text-xs" style="color: #283044;" mt-1">
                Site assessment score
              </p>
            </div>
          </div>
        </div>

        <!-- Sub-navigation based on main nav selection -->
        <div id="market-subnav" class="mb-2" style="margin-left: 80px; margin-right: 48px; margin-top: 8px; margin-bottom: 8px;">
          <div class="rounded-lg p-4" style="background: #141d2c;">
            <h3 class="text-md font-semibold text-gray-700 mb-4" style="color: #e3721d">Market Analysis Tools</h3>
            <div class="flex flex-wrap gap-3">
              <button
                id="market-view-btn"
                class="rounded text-white" style="background: #4C9693; padding: 12px 32px; margin: 0 8px;"
              >
                Market Analysis
              </button>
            </div>
          </div>
        </div>

        <div id="operational-subnav" class="mb-2 hidden" style="margin-left: 80px; margin-right: 48px; margin-top: 8px; margin-bottom: 8px;">
          <div class="rounded-lg p-4" style="background: #141d2c;">
            <h3 class="text-md font-semibold text-gray-700 mb-4" style="color: #e3721d">Operational Analysis Tools</h3>
            <div class="flex flex-wrap gap-3">
              <button
                id="layout-view-btn"
                class="rounded text-white" style="background: #78A1BB; padding: 12px 32px; margin: 0 8px;"
              >
                Unit Mix & Layout
              </button>
              <button
                id="leaseup-view-btn"
                class="rounded bg-gray-200 text-gray-800 text-base font-medium" style="padding: 12px 32px;"
              >
                Lease-up Timeline
              </button>
              <button
                id="operating-expenses-view-btn"
                class="rounded bg-gray-200 text-gray-800 text-base font-medium" style="padding: 12px 32px;"
              >
                Operating Expenses
              </button>
              <button
                id="suppliers-view-btn"
                class="rounded bg-gray-200 text-gray-800 text-base font-medium" style="padding: 12px 32px;"
              >
                Suppliers & Resources
              </button>
            </div>
          </div>
        </div>

        <div id="financial-subnav" class="mb-2 hidden" style="margin-left: 80px; margin-right: 48px; margin-top: 8px; margin-bottom: 8px;">
          <div class="rounded-lg p-4" style="background: #141d2c;">
            <h3 class="text-md font-semibold text-gray-700 mb-4" style="color: #e3721d">Financial Analysis Tools</h3>
            <div class="flex flex-wrap gap-3">
              <button
                id="financial-view-btn"
                class="rounded text-white" style="background: #78A1BB; padding: 12px 32px;"
              >
                Financial View
              </button>
              <button
                id="breakeven-view-btn"
                class="rounded bg-gray-200 text-gray-800 text-base font-medium" style="padding: 12px 32px;"
              >
                Break-even Analysis
              </button>
              <button
                id="cashflow-view-btn"
                class="rounded bg-gray-200 text-gray-800 text-base font-medium" style="padding: 12px 32px;"
              >
                Cash Flow Analysis
              </button>
              <button
                id="sensitivity-view-btn"
                class="rounded bg-gray-200 text-gray-800 text-base font-medium" style="padding: 12px 32px;"
              >
                Sensitivity Analysis
              </button>
            </div>
          </div>
        </div>

        <div id="suppliers-subnav" class="mb-2 hidden" style="margin-left: 80px; margin-right: 48px; margin-top: 8px; margin-bottom: 8px;">
          <div class="rounded-lg p-4" style="background: #141d2c;">
            <h3 class="text-md font-semibold text-gray-700 mb-4" style="color: #e3721d">Suppliers & Resources</h3>
            <div class="flex flex-wrap gap-3">
              <button
                id="suppliers-view-btn"
                class="rounded text-white" style="background: #78A1BB; padding: 12px 32px;"
              >
                Suppliers & Resources
              </button>
            </div>
          </div>
        </div>


      <!-- Main Content Areas -->
      <div
        id="financial-view"
        class="hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 24px;"
      >

        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700 mb-2" style="color: #e3721d">
            Financial Projection
          </h3>
          <table class="min-w-full bg-white" style="border: 1px solid #283044;">
            <thead class="bg-gray-100">
              <tr>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a"
                  style="border-bottom: 1px solid #283044;"
                >
                  Metric
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a"
                  style="border-bottom: 1px solid #283044;"
                >
                  Monthly
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a"
                  style="border-bottom: 1px solid #283044;"
                >
                  Annual
                </th>
              </tr>
            </thead>
            <tbody>
              <tr class="hover:bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium">
                  Gross Revenue
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-monthly-revenue"
                >
                  ‚Ç¨0.00
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-annual-revenue"
                >
                  ‚Ç¨0.00
                </td>
              </tr>
              <tr class="hover:bg-gray-50 bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium">
                  Operating Expenses
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-monthly-expenses"
                >
                  ‚Ç¨0.00
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-annual-expenses"
                >
                  ‚Ç¨0.00
                </td>
              </tr>
              <tr class="hover:bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium">
                  Interest Expense
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-monthly-interest"
                >
                  ‚Ç¨0.00
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-annual-interest"
                >
                  ‚Ç¨0.00
                </td>
              </tr>
              <tr class="hover:bg-gray-50 bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium">
                  Net Operating Income
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium"
                  id="financial-monthly-noi"
                >
                  ‚Ç¨0.00
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium"
                  id="financial-annual-noi"
                >
                  ‚Ç¨0.00
                </td>
              </tr>
              <tr class="hover:bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">Revenue per m¬≤</td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-revenue-per-sqm"
                  colspan="2"
                >
                  ‚Ç¨0.00/m¬≤/month
                </td>
              </tr>
              <tr class="hover:bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">
                  Space Utilization
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-utilization"
                  colspan="2"
                >
                  0.0%
                </td>
              </tr>
              <tr class="hover:bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">NOI Margin</td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-noi-margin"
                  colspan="2"
                >
                  0.0%
                </td>
              </tr>
              <tr class="hover:bg-gray-50" style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">
                  Investment Return (ROI)
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a"
                  id="financial-roi"
                  colspan="2"
                >
                  0.0% annually
                </td>
              </tr>
            </tbody>
          </table>

          <div class="mt-4 bg-white border rounded">
            <div class="px-4 py-3 bg-gray-100" style="border-bottom: 1px solid #283044;">
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a">
                Operating Expenses
              </h4>
            </div>
            <div class="p-4">
              <div class="mb-3">
                <div class="flex justify-between mb-1">
                  <span class="text-xs text-gray-700" style="color: #1e3a8a">Total Expense Ratio</span>
                  <span
                    class="text-xs text-gray-700" style="color: #1e3a8a" font-medium"
                    id="expense-ratio-display"
                    >35.0%</span
                  >
                </div>
                <input
                  type="range"
                  min="20"
                  max="60"
                  step="1"
                  value="35"
                  id="expense-ratio-slider"
                  class="w-full"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-1">
                  <span>Low (20%)</span>
                  <span>Industry Avg (35-40%)</span>
                  <span>High (60%)</span>
                </div>
              </div>

              <div class="mb-3">
                <div class="flex justify-between mb-1">
                  <span class="text-xs text-gray-700" style="color: #1e3a8a">Occupancy Rate</span>
                  <span
                    class="text-xs text-gray-700" style="color: #1e3a8a" font-medium"
                    id="occupancy-rate-display"
                    >85%</span
                  >
                </div>
                <input
                  type="range"
                  min="50"
                  max="100"
                  step="1"
                  value="85"
                  id="occupancy-rate-slider"
                  class="w-full"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-1">
                  <span>Low (50%)</span>
                  <span>Industry Avg (80-90%)</span>
                  <span>High (100%)</span>
                </div>
              </div>

              <div class="bg-blue-50 p-2 rounded text-xs text-gray-700" style="color: #1e3a8a" mb-3">
                <p>
                  Typical self-storage expenses include property taxes (5-15%),
                  insurance (2-4%), utilities (3-6%), maintenance (3-7%), staff
                  (10-15%), and marketing (3-8%).
                </p>
              </div>

              <div class="grid grid-cols-2 gap-2">
                <div>
                  <h5 class="text-xs font-medium text-gray-700" style="color: #1e3a8a" mb-2">
                    Key Expense Categories:
                  </h5>
                  <ul class="text-xs text-gray-600 list-disc pl-4 mb-0">
                    <li>Property Taxes</li>
                    <li>Insurance</li>
                    <li>Utilities</li>
                    <li>Maintenance/Repairs</li>
                    <li>Staff/Management</li>
                  </ul>
                </div>
                <div>
                  <h5 class="text-xs font-medium text-gray-700" style="color: #1e3a8a" mb-2">
                    Financial Metrics:
                  </h5>
                  <div class="text-xs text-gray-600">
                    <div class="flex justify-between mb-1">
                      <span>Expense Ratio:</span>
                      <span id="financial-expense-ratio">35.0%</span>
                    </div>
                    <div class="flex justify-between mb-1">
                      <span>NOI Margin:</span>
                      <span id="financial-noi-margin-summary">65.0%</span>
                    </div>
                    <div class="flex justify-between">
                      <span>Annual NOI:</span>
                      <span id="financial-annual-noi-summary">‚Ç¨0.00</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="layout-view" class="hidden" style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 12px 16px;">
        <!-- Unit Mix Ratios Controls -->
        <div class="mb-6 p-4 rounded-lg border" style="background: #fff; opacity: 0.9;" id="unit-mix-section">
          <h2 class="text-lg font-medium text-gray-700 mb-4" style="color: #1e3a8a">
            Unit Mix Ratios
          </h2>

          <!-- Mix Presets -->
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1" style="color: #1e3a8a"
              >Mix Presets</label
            >
            <div class="flex flex-wrap gap-2" id="mix-presets-container">
              <button
                id="preset-custom"
                class="px-3 py-1 text-sm rounded text-white" style="background: #78A1BB;"
              >
                Custom Mix
              </button>
              <button
                id="preset-urban"
                class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
              >
                Urban Focus
              </button>
              <button
                id="preset-suburban"
                class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
              >
                Suburban Standard
              </button>
              <button
                id="preset-business"
                class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
              >
                Business Focus
              </button>
              <button
                id="preset-balanced"
                class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
              >
                Perfectly Balanced
              </button>
            </div>
            <p
              id="preset-description"
              class="text-xs text-gray-600 mt-1 hidden"
            ></p>
          </div>

          <!-- Total Mix Percentage Indicator -->
          <div
            id="mix-total-indicator"
            class="mb-3 bg-yellow-50 rounded p-2 hidden" style="border: 1px solid #283044;"
          >
            <div class="flex justify-between items-center">
              <span class="text-sm text-yellow-800">
                Total Mix: <strong id="mix-total-value">0%</strong>
              </span>
              <button
                id="auto-balance-btn"
                class="text-white text-xs px-2 py-1 rounded" style="background: #78A1BB;"
              >
                Auto-Balance to 100%
              </button>
            </div>
            <div class="w-full bg-gray-200 h-2 rounded-full mt-2">
              <div
                id="mix-total-bar"
                class="h-full rounded-full bg-yellow-500"
                style="width: 0%"
              ></div>
            </div>
            <p id="mix-total-message" class="text-xs text-gray-600 mt-1">
              Your unit mix totals less than 100%. Click 'Auto-Balance' to
              proportionally adjust all values.
            </p>
          </div>

          <div
            class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"
            id="unit-types-container"
          >
            <!-- Unit type cards will be dynamically generated -->
          </div>
        </div>

        <!-- Unit Summary -->
        <div class="p-4 rounded-lg border mb-6" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-2">Unit Summary</h3>
          <table class="min-w-full bg-white" style="border: 1px solid #283044;">
            <thead class="bg-gray-100">
              <tr>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Unit Size
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Area
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Count
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Total Area
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Monthly Revenue
                </th>
              </tr>
            </thead>
            <tbody id="unit-summary-table">
              <!-- Unit summary rows will be dynamically generated -->
            </tbody>
          </table>
        </div>

        <!-- Layout Charts -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" style="margin-bottom: 24px;">
          <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
            <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
              Revenue by Unit Type
            </h3>
            <div id="revenue-chart" style="width: 100%; height: 300px"></div>
          </div>

          <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
            <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
              Unit Mix Distribution
            </h3>
            <div id="unit-mix-chart" style="width: 100%; height: 300px"></div>
          </div>
        </div>

        <!-- Space Allocation -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Space Allocation
          </h3>
          <div class="flex mb-4">
            <div class="flex-1 pr-2" style="border-right: 1px solid #283044;">
              <h4 class="text-sm font-medium mb-2">Rentable Area</h4>
              <div class="flex gap-2 items-center">
                <div class="bg-green-500 w-3 h-3 rounded-full"></div>
                <div class="text-sm" id="space-rentable-area">
                  0.0 m¬≤ (0.0%)
                </div>
              </div>
            </div>
            <div class="flex-1 pl-2">
              <h4 class="text-sm font-medium mb-2">Corridor/Common Space</h4>
              <div class="flex gap-2 items-center">
                <div class="bg-gray-400 w-3 h-3 rounded-full"></div>
                <div class="text-sm" id="space-common-area">0.0 m¬≤ (0.0%)</div>
              </div>
            </div>
          </div>

          <div class="w-full bg-gray-200 h-6 rounded-full overflow-hidden">
            <div
              id="space-utilization-bar"
              class="bg-green-500 h-full rounded-full"
              style="width: 0%"
            ></div>
          </div>

          <div class="mt-4 text-xs text-gray-600">
            <p>
              Industry standard space utilization is between 65-75%. Higher
              values indicate more efficient use of space but may compromise
              customer experience with narrower corridors or restricted access.
            </p>
          </div>
        </div>
      </div>

      <div
        id="breakeven-view"
        class="grid grid-cols-1 md:grid-cols-2 gap-6 hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 24px;"
      >
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Investment Analysis
          </h3>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
              Construction Cost per m¬≤
            </label>
            <div class="flex gap-2">
              <input
                type="number"
                id="construction-cost-input"
                value="350"
                min="100"
                step="10"
                class="border rounded px-2 py-1 w-32"
              />
              <span class="text-sm text-gray-600 self-center">‚Ç¨/m¬≤</span>
            </div>
          </div>

          <table class="min-w-full" style="border: 1px solid #283044;">
            <tbody>
              <tr style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">
                  Total Construction Cost
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium"
                  id="total-construction-cost"
                >
                  ‚Ç¨0.00
                </td>
              </tr>
              <tr style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">Annual NOI</td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium"
                  id="breakeven-annual-noi"
                >
                  ‚Ç¨0.00
                </td>
              </tr>
              <tr style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">
                  Return on Investment (ROI)
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium"
                  id="breakeven-roi"
                >
                  0.00% annually
                </td>
              </tr>
              <tr style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">
                  Break-even Period
                </td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium"
                  id="breakeven-period"
                >
                  0.0 years
                </td>
              </tr>
              <tr style="border-bottom: 1px solid #283044;">
                <td class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a">Cost per Unit</td>
                <td
                  class="px-4 py-2 text-sm text-gray-700" style="color: #1e3a8a" font-medium"
                  id="cost-per-unit"
                >
                  ‚Ç¨0.00
                </td>
              </tr>
            </tbody>
          </table>

          <div class="mt-4 bg-blue-50 p-3 rounded text-sm">
            <p class="font-medium text-blue-800 mb-1">Investment Notes:</p>
            <ul class="text-xs text-gray-700" style="color: #1e3a8a" list-disc pl-4 mb-0">
              <li>
                Industry average ROI for self-storage facilities is between
                6-10%
              </li>
              <li>Break-even periods typically range from 8-12 years</li>
              <li>
                Consider phased development to reduce initial capital
                requirements
              </li>
              <li>
                Banks typically require 25-35% equity for self-storage loans
              </li>
            </ul>
          </div>
        </div>

        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Phased Development Plan
          </h3>

          <p class="text-sm text-gray-600 mb-4">
            A phased approach allows you to spread the investment over time
            while generating revenue to help fund future phases.
          </p>

          <table class="min-w-full" style="border: 1px solid #283044;">
            <thead class="bg-gray-100">
              <tr>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Phase
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Area (m¬≤)
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Investment
                </th>
                <th
                  class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b"
                >
                  Annual Revenue
                </th>
              </tr>
            </thead>
            <tbody id="phase-data-table">
              <!-- Phase data rows will be dynamically generated -->
            </tbody>
          </table>

          <div
            class="mt-4 bg-yellow-50 p-3 rounded text-sm" style="border: 1px solid #283044;"
          >
            <p class="font-medium text-yellow-800 mb-1">
              Phasing Considerations:
            </p>
            <ul class="text-xs text-gray-700" style="color: #1e3a8a" list-disc pl-4 mb-0">
              <li>
                Phase 1: Build core facility with essential infrastructure
              </li>
              <li>Phase 2: Expand based on demand patterns from Phase 1</li>
              <li>
                Phase 3: Complete the facility to maximize economies of scale
              </li>
              <li>
                Later phases typically have higher occupancy ramp-up speed
              </li>
              <li>
                Consider adjusting unit mix in later phases based on actual
                demand
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div
        id="leaseup-view"
        class="grid grid-cols-1 md:grid-cols-2 gap-6 hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 24px;"
      >
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Lease-up Timeline Modeling
          </h3>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
              Monthly Lease-up Rate
            </label>
            <div class="flex gap-2 items-center">
              <input
                type="number"
                id="leaseup-rate-input"
                value="8"
                min="1"
                max="50"
                step="1"
                class="border rounded px-2 py-1 w-20"
              />
              <span class="text-sm text-gray-600">units per month</span>
            </div>
            <p class="text-xs text-gray-500 mt-1">
              Industry average: 5-12 units per month for new facilities
            </p>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
              Ramp-up Period
            </label>
            <div class="flex gap-2 items-center">
              <input
                type="number"
                id="rampup-months-input"
                value="6"
                min="0"
                max="24"
                step="1"
                class="border rounded px-2 py-1 w-20"
              />
              <span class="text-sm text-gray-600">months before steady leasing</span>
            </div>
            <p class="text-xs text-gray-500 mt-1">
              Time to build awareness and marketing momentum
            </p>
          </div>

          <table class="min-w-full" style="border: 1px solid #283044;">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">
                  Milestone
                </th>
                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">
                  Timeline
                </th>
                <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">
                  Revenue
                </th>
              </tr>
            </thead>
            <tbody id="leaseup-milestones-table">
              <!-- Milestone rows will be dynamically generated -->
            </tbody>
          </table>

          <div class="mt-4 bg-blue-50 p-3 rounded text-sm">
            <p class="font-medium text-blue-800 mb-1">Lease-up Factors:</p>
            <ul class="text-xs text-gray-700" style="color: #1e3a8a" list-disc pl-4 mb-0">
              <li>Market competition and saturation</li>
              <li>Marketing budget and effectiveness</li>
              <li>Location visibility and accessibility</li>
              <li>Pricing strategy relative to competitors</li>
              <li>Economic conditions in your area</li>
            </ul>
          </div>
        </div>

        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Revenue Projection Timeline
          </h3>
          <div id="leaseup-chart" style="width: 100%; height: 400px"></div>
          
          <div class="mt-4">
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-gray-50 p-3 rounded">
                <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Break-even Timeline</h4>
                <div class="text-lg font-bold text-blue-600" id="breakeven-timeline">
                  0 months
                </div>
                <p class="text-xs" style="color: #283044;"">Time to cover operating expenses</p>
              </div>
              <div class="bg-gray-50 p-3 rounded">
                <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">80% Occupancy</h4>
                <div class="text-lg font-bold text-green-600" id="target-occupancy-timeline">
                  0 months
                </div>
                <p class="text-xs" style="color: #283044;"">Industry benchmark for mature facility</p>
              </div>
            </div>
          </div>

          <div class="mt-4 bg-yellow-50 p-3 rounded text-sm" style="border: 1px solid #283044;">
            <p class="font-medium text-yellow-800 mb-1">Cash Flow Considerations:</p>
            <ul class="text-xs text-gray-700" style="color: #1e3a8a" list-disc pl-4 mb-0">
              <li>Initial months require significant cash reserves</li>
              <li>Marketing costs are highest in first 6-12 months</li>
              <li>Consider promotional pricing for early customers</li>
              <li>Plan for seasonal variations in demand</li>
            </ul>
          </div>
        </div>
      </div>

      <div
        id="market-view"
        class="grid grid-cols-1 md:grid-cols-2 gap-6 hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 0px; padding: 12px 16px;"
      >
        <!-- Site Location & Basic Info -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Site Location Analysis
          </h3>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
              Property Address/Location
            </label>
            <input
              type="text"
              id="site-address-input"
              placeholder="Enter address or city, state"
              class="border rounded px-2 py-1 w-full"
            />
            <p class="text-xs text-gray-500 mt-1">
              We'll analyze demographics and competition for this area
            </p>
          </div>

          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Population Density
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="population-density-input"
                  value="2500"
                  min="100"
                  step="100"
                  class="border rounded px-2 py-1 w-20"
                />
                <span class="text-sm text-gray-600">people/km¬≤</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Median Income
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="median-income-input"
                  value="45000"
                  min="20000"
                  step="1000"
                  class="border rounded px-2 py-1 w-24"
                />
                <span class="text-sm text-gray-600">‚Ç¨/year</span>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Housing Turnover Rate
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="housing-turnover-input"
                  value="12"
                  min="5"
                  max="30"
                  step="1"
                  class="border rounded px-2 py-1 w-16"
                />
                <span class="text-sm text-gray-600">% annually</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Distance to City Center
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="distance-center-input"
                  value="8"
                  min="0"
                  max="50"
                  step="1"
                  class="border rounded px-2 py-1 w-16"
                />
                <span class="text-sm text-gray-600">km</span>
              </div>
            </div>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">
              Site Characteristics
            </label>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" id="highway-access" class="mr-2" checked>
                <span class="text-sm">Highway/main road access</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" id="truck-access" class="mr-2" checked>
                <span class="text-sm">Large truck accessibility</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" id="visibility" class="mr-2">
                <span class="text-sm">High visibility from road</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" id="existing-building" class="mr-2">
                <span class="text-sm">Existing building to convert</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Competition Analysis -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Competition & Market Saturation
          </h3>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
              Existing Facilities (5km radius)
            </label>
            <input
              type="number"
              id="competing-facilities-input"
              value="3"
              min="0"
              max="20"
              step="1"
              class="border rounded px-2 py-1 w-16"
            />
            <p class="text-xs text-gray-500 mt-1">
              Number of self-storage facilities within 5km
            </p>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
              Average Competitor Price (10m¬≤ unit)
            </label>
            <div class="flex gap-2 items-center">
              <input
                type="number"
                id="competitor-price-input"
                value="180"
                min="50"
                max="500"
                step="10"
                class="border rounded px-2 py-1 w-20"
              />
              <span class="text-sm text-gray-600">‚Ç¨/month</span>
            </div>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
              Estimated Market Occupancy
            </label>
            <div class="flex gap-2 items-center">
              <input
                type="number"
                id="market-occupancy-input"
                value="82"
                min="40"
                max="100"
                step="1"
                class="border rounded px-2 py-1 w-16"
              />
              <span class="text-sm text-gray-600">%</span>
            </div>
            <p class="text-xs text-gray-500 mt-1">
              Average occupancy of existing facilities
            </p>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">
              Market Demand Drivers
            </label>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" id="new-developments" class="mr-2">
                <span class="text-sm">New residential developments nearby</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" id="business-district" class="mr-2">
                <span class="text-sm">Business/commercial district</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" id="military-base" class="mr-2">
                <span class="text-sm">Military base or university nearby</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" id="seasonal-tourism" class="mr-2">
                <span class="text-sm">Seasonal tourism/recreation</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Market Viability Score -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Market Viability Assessment
          </h3>

          <div class="mb-4">
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm font-medium">Overall Viability Score</span>
              <span class="text-2xl font-bold" id="viability-score">75</span>
            </div>
            <div class="w-full bg-gray-200 h-4 rounded-full">
              <div
                id="viability-bar"
                class="h-full rounded-full bg-gradient-to-r from-red-500 via-yellow-500 to-green-500"
                style="width: 75%"
              ></div>
            </div>
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>Poor (0-40)</span>
              <span>Fair (41-60)</span>
              <span>Good (61-80)</span>
              <span>Excellent (81-100)</span>
            </div>
          </div>

          <div class="space-y-3">
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-700" style="color: #1e3a8a">Demographics Score</span>
              <div class="flex items-center">
                <div class="w-24 bg-gray-200 h-2 rounded-full mr-2">
                  <div id="demographics-bar" class="h-full rounded-full text-white" style="background: #78A1BB;"" style="width: 80%"></div>
                </div>
                <span class="text-sm font-medium" id="demographics-score">80</span>
              </div>
            </div>

            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-700" style="color: #1e3a8a">Competition Score</span>
              <div class="flex items-center">
                <div class="w-24 bg-gray-200 h-2 rounded-full mr-2">
                  <div id="competition-bar" class="h-full rounded-full bg-green-500" style="width: 70%"></div>
                </div>
                <span class="text-sm font-medium" id="competition-score">70</span>
              </div>
            </div>

            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-700" style="color: #1e3a8a">Site Quality Score</span>
              <div class="flex items-center">
                <div class="w-24 bg-gray-200 h-2 rounded-full mr-2">
                  <div id="site-quality-bar" class="h-full rounded-full bg-yellow-500" style="width: 75%"></div>
                </div>
                <span class="text-sm font-medium" id="site-quality-score">75</span>
              </div>
            </div>
          </div>

          <div class="mt-4 p-3 rounded" id="viability-recommendation">
            <p class="font-medium text-green-800 mb-1">‚úì Recommended Site</p>
            <p class="text-sm text-gray-700" style="color: #1e3a8a">
              This location shows strong potential for a self-storage facility based on demographics, competition analysis, and site characteristics.
            </p>
          </div>
        </div>

        <!-- Market Insights & Recommendations -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Market Insights & Recommendations
          </h3>

          <div class="space-y-4">
            <div>
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Key Market Metrics</h4>
              <div class="grid grid-cols-2 gap-3 text-sm">
                <div class="bg-gray-50 p-2 rounded">
                  <div class="text-gray-600">Demand Index</div>
                  <div class="font-bold" id="demand-index">1.2x</div>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                  <div class="text-gray-600">Supply Gap</div>
                  <div class="font-bold" id="supply-gap">+350 units</div>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                  <div class="text-gray-600">Price Premium</div>
                  <div class="font-bold" id="price-premium">+8%</div>
                </div>
                <div class="bg-gray-50 p-2 rounded">
                  <div class="text-gray-600">Break-even Risk</div>
                  <div class="font-bold" id="breakeven-risk">Low</div>
                </div>
              </div>
            </div>

            <div>
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Strategic Recommendations</h4>
              <div class="space-y-2 text-sm" id="strategic-recommendations">
                <div class="flex items-start">
                  <span class="text-green-600 mr-2">‚Ä¢</span>
                  <span>Focus on 5-10m¬≤ units based on local demographics</span>
                </div>
                <div class="flex items-start">
                  <span class="text-green-600 mr-2">‚Ä¢</span>
                  <span>Price 5-10% above market average due to limited competition</span>
                </div>
                <div class="flex items-start">
                  <span class="text-blue-600 mr-2">‚Ä¢</span>
                  <span>Consider climate-controlled units for 40% of inventory</span>
                </div>
              </div>
            </div>

            <div>
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Risk Factors</h4>
              <div class="space-y-2 text-sm" id="risk-factors">
                <div class="flex items-start">
                  <span class="text-yellow-600 mr-2">‚ö†</span>
                  <span>Monitor planned competing facilities in development</span>
                </div>
                <div class="flex items-start">
                  <span class="text-yellow-600 mr-2">‚ö†</span>
                  <span>Economic downturn could impact household mobility</span>
                </div>
              </div>
            </div>

            <div class="mt-4 bg-blue-50 p-3 rounded text-sm">
              <p class="font-medium text-blue-800 mb-1">Next Steps:</p>
              <ul class="text-xs text-gray-700" style="color: #1e3a8a" list-disc pl-4 mb-0">
                <li>Conduct physical site survey for zoning compliance</li>
                <li>Research local permit requirements and timelines</li>
                <li>Analyze traffic patterns and seasonal variations</li>
                <li>Contact nearby facilities for market intelligence</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Operating Expenses View -->
      <div
        id="operating-expenses-view"
        class="grid grid-cols-1 md:grid-cols-2 gap-6 hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 24px;"
      >
        <!-- Monthly Operating Expenses -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Monthly Operating Expenses
          </h3>
          
          <div class="space-y-4">
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Property Management</span>
              <span class="text-sm font-medium">‚Ç¨<span id="mgmt-cost">450</span></span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Utilities (Electric/Water)</span>
              <span class="text-sm font-medium">‚Ç¨<span id="utilities-cost">320</span></span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Insurance</span>
              <span class="text-sm font-medium">‚Ç¨<span id="insurance-cost">180</span></span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Security System</span>
              <span class="text-sm font-medium">‚Ç¨<span id="security-cost">125</span></span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Maintenance & Repairs</span>
              <span class="text-sm font-medium">‚Ç¨<span id="maintenance-cost">275</span></span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Marketing & Advertising</span>
              <span class="text-sm font-medium">‚Ç¨<span id="marketing-cost">200</span></span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">Legal & Professional</span>
              <span class="text-sm font-medium">‚Ç¨<span id="legal-cost">150</span></span>
            </div>
            <hr class="my-3">
            <div class="flex justify-between items-center font-semibold">
              <span class="text-gray-800">Total Monthly OpEx</span>
              <span class="text-lg text-blue-600">‚Ç¨<span id="total-opex">1,700</span></span>
            </div>
          </div>
        </div>

        <!-- Operating Expense Controls -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Adjust Operating Expenses
          </h3>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Property Management (‚Ç¨/month)</label>
              <input type="range" id="mgmt-slider" min="200" max="800" value="450" class="w-full">
              <span class="text-xs text-gray-500">Typically 3-8% of gross revenue</span>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Utilities (‚Ç¨/month)</label>
              <input type="range" id="utilities-slider" min="150" max="600" value="320" class="w-full">
              <span class="text-xs text-gray-500">Lighting, climate control, water</span>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Insurance (‚Ç¨/month)</label>
              <input type="range" id="insurance-slider" min="100" max="350" value="180" class="w-full">
              <span class="text-xs text-gray-500">Property & liability coverage</span>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Security System (‚Ç¨/month)</label>
              <input type="range" id="security-slider" min="75" max="250" value="125" class="w-full">
              <span class="text-xs text-gray-500">Cameras, access control, monitoring</span>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Maintenance & Repairs (‚Ç¨/month)</label>
              <input type="range" id="maintenance-slider" min="150" max="500" value="275" class="w-full">
              <span class="text-xs text-gray-500">Preventive maintenance, repairs</span>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Marketing & Advertising (‚Ç¨/month)</label>
              <input type="range" id="marketing-slider" min="100" max="400" value="200" class="w-full">
              <span class="text-xs text-gray-500">Online ads, signage, promotions</span>
            </div>
          </div>
        </div>

        <!-- Expense Analysis -->
        <div class="p-4 rounded-lg border md:col-span-2" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Operating Expense Analysis
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-blue-50 p-3 rounded">
              <h4 class="text-sm font-medium text-blue-800 mb-1">OpEx Ratio</h4>
              <p class="text-xl font-bold text-blue-600" id="opex-ratio">42%</p>
              <p class="text-xs text-blue-600">Of gross revenue</p>
            </div>
            
            <div class="bg-green-50 p-3 rounded">
              <h4 class="text-sm font-medium text-green-800 mb-1">Annual OpEx</h4>
              <p class="text-xl font-bold text-green-600" id="annual-opex">‚Ç¨20,400</p>
              <p class="text-xs text-green-600">Total yearly cost</p>
            </div>
            
            <div class="bg-yellow-50 p-3 rounded">
              <h4 class="text-sm font-medium text-yellow-800 mb-1">Cost per m¬≤</h4>
              <p class="text-xl font-bold text-yellow-600" id="opex-per-sqm">‚Ç¨13.6</p>
              <p class="text-xs text-yellow-600">Monthly cost per m¬≤</p>
            </div>
          </div>
          
          <div class="mt-4 p-3 bg-gray-50 rounded">
            <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Industry Benchmarks</h4>
            <ul class="text-xs text-gray-600 space-y-1">
              <li>‚Ä¢ Total OpEx should be 35-50% of gross revenue</li>
              <li>‚Ä¢ Property management: 3-8% of revenue</li>
              <li>‚Ä¢ Utilities: ‚Ç¨2-4 per m¬≤ per month</li>
              <li>‚Ä¢ Insurance: ‚Ç¨1.2-2.5 per m¬≤ per month</li>
              <li>‚Ä¢ Maintenance: 2-4% of revenue annually</li>
            </ul>
          </div>
        </div>
      </div>

      <div
        id="suppliers-view"
        class="grid grid-cols-1 gap-6 hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 24px;"
      >
        <!-- Category Filter Bar -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Self-Storage Industry Suppliers & Resources
          </h3>
          
          <div class="flex flex-wrap gap-2 mb-4">
            <button
              id="filter-all"
              class="px-3 py-1 text-sm rounded text-white" style="background: #78A1BB;" text-white"
            >
              All Categories
            </button>
            <button
              id="filter-construction"
              class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
            >
              Construction & Building
            </button>
            <button
              id="filter-security"
              class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
            >
              Security Systems
            </button>
            <button
              id="filter-doors"
              class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
            >
              Doors & Hardware
            </button>
            <button
              id="filter-management"
              class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
            >
              Management Software
            </button>
            <button
              id="filter-financing"
              class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
            >
              Financing & Insurance
            </button>
            <button
              id="filter-marketing"
              class="px-3 py-1 text-sm rounded bg-gray-200 text-gray-800"
            >
              Marketing & Operations
            </button>
          </div>

          <div class="mb-4">
            <input
              type="text"
              id="supplier-search"
              placeholder="Search suppliers, products, or services..."
              class="border rounded px-3 py-2 w-full md:w-96"
            />
          </div>

          <div class="bg-yellow-50 rounded p-3 text-sm" style="border: 1px solid #283044;">
            <p class="text-yellow-800 font-medium mb-1">üí° Affiliate Disclosure</p>
            <p class="text-gray-700" style="color: #1e3a8a">
              Some links below are affiliate links. We may earn a commission when you make purchases through these links, at no additional cost to you. This helps support the development of this free planning tool.
            </p>
          </div>
        </div>

        <!-- Suppliers Grid -->
        <div id="suppliers-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- Supplier cards will be dynamically generated -->
        </div>

        <!-- Recommended Suppliers Based on Your Project -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            üìã Recommended for Your Project
          </h3>
          
          <div class="bg-blue-50 rounded p-3 mb-4" style="border: 1px solid #283044;">
            <p class="text-sm text-blue-800 mb-2">
              Based on your facility size (<span id="rec-facility-size">1500m¬≤</span>) and location, here are our top recommendations:
            </p>
          </div>

          <div id="recommended-suppliers" class="space-y-3">
            <!-- Recommended supplier cards will be generated -->
          </div>
        </div>

        <!-- Industry Resources -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            üìö Industry Resources & Education
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Trade Associations</h4>
              <div class="space-y-2 text-sm">
                <a href="https://www.selfstorage.org/" target="_blank" class="flex items-center text-blue-600 hover:text-blue-800">
                  <span class="mr-2">üè¢</span>
                  Self Storage Association (SSA)
                </a>
                <a href="https://www.federationeuropeenneselfstorage.org/" target="_blank" class="flex items-center text-blue-600 hover:text-blue-800">
                  <span class="mr-2">üá™üá∫</span>
                  European Self Storage Association (ESSA)
                </a>
              </div>
            </div>
            
            <div>
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Industry Publications</h4>
              <div class="space-y-2 text-sm">
                <a href="https://www.insideselfstorage.com/" target="_blank" class="flex items-center text-blue-600 hover:text-blue-800">
                  <span class="mr-2">üì∞</span>
                  Inside Self-Storage Magazine
                </a>
                <a href="https://www.selfstorageinvestor.com/" target="_blank" class="flex items-center text-blue-600 hover:text-blue-800">
                  <span class="mr-2">üíº</span>
                  Self-Storage Investor
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        id="cashflow-view"
        class="grid grid-cols-1 gap-6 hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 24px;"
      >
        <!-- Cash Flow Controls -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Cash Flow Analysis - 5 Year Projection
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Initial Investment
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="initial-investment-input"
                  value="750000"
                  min="100000"
                  step="10000"
                  class="border rounded px-2 py-1 w-32"
                />
                <span class="text-sm text-gray-600">‚Ç¨</span>
              </div>
              <p class="text-xs" style="color: #283044;" mt-1">
                Construction + land + equipment costs
              </p>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Working Capital Reserve
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="working-capital-input"
                  value="75000"
                  min="10000"
                  step="5000"
                  class="border rounded px-2 py-1 w-32"
                />
                <span class="text-sm text-gray-600">‚Ç¨</span>
              </div>
              <p class="text-xs" style="color: #283044;" mt-1">
                6-12 months operating expenses
              </p>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Loan Amount (if any)
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="loan-amount-input"
                  value="500000"
                  min="0"
                  step="10000"
                  class="border rounded px-2 py-1 w-32"
                />
                <span class="text-sm text-gray-600">‚Ç¨</span>
              </div>
              <p class="text-xs" style="color: #283044;" mt-1">
                Bank financing portion
              </p>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Interest Rate
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="interest-rate-input"
                  value="5.5"
                  min="3"
                  max="12"
                  step="0.1"
                  class="border rounded px-2 py-1 w-20"
                />
                <span class="text-sm text-gray-600">% annually</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-1">
                Loan Term
              </label>
              <div class="flex gap-2 items-center">
                <input
                  type="number"
                  id="loan-term-input"
                  value="20"
                  min="10"
                  max="30"
                  step="1"
                  class="border rounded px-2 py-1 w-20"
                />
                <span class="text-sm text-gray-600">years</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Cash Flow Chart -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Monthly Cash Flow Projection
          </h3>
          <div id="cashflow-chart" style="width: 100%; height: 400px"></div>
        </div>

        <!-- Cash Flow Summary Table -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Annual Cash Flow Summary
          </h3>
          <div class="overflow-x-auto">
            <table class="min-w-full" style="border: 1px solid #283044;">
              <thead class="bg-gray-100">
                <tr>
                  <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">Year</th>
                  <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">Gross Revenue</th>
                  <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">Operating Expenses</th>
                  <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">Debt Service</th>
                  <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">Net Cash Flow</th>
                  <th class="px-4 py-2 text-left text-sm font-medium text-gray-700" style="color: #1e3a8a" border-b">Cumulative Cash</th>
                </tr>
              </thead>
              <tbody id="cashflow-summary-table">
                <!-- Cash flow rows will be generated -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Key Financial Metrics -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Key Financial Metrics
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-blue-50 p-3 rounded">
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Cash Positive Month</h4>
              <div class="text-xl font-bold text-blue-600" id="cash-positive-month">
                Month 0
              </div>
              <p class="text-xs" style="color: #283044;"">When monthly cash flow turns positive</p>
            </div>
            <div class="bg-green-50 p-3 rounded">
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Break-even Timeline</h4>
              <div class="text-xl font-bold text-green-600" id="cumulative-positive-month">
                Month 0
              </div>
              <p class="text-xs" style="color: #283044;"">When cumulative cash turns positive</p>
            </div>
            <div class="bg-yellow-50 p-3 rounded">
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">5-Year Cash Position</h4>
              <div class="text-xl font-bold text-yellow-600" id="five-year-cash">
                ‚Ç¨0
              </div>
              <p class="text-xs" style="color: #283044;"">Total cash accumulated after 5 years</p>
            </div>
          </div>
        </div>
      </div>

      <div
        id="sensitivity-view"
        class="grid grid-cols-1 gap-6 hidden"
        style="margin-left: 80px; margin-right: 48px; margin-top: 8px; padding: 24px;"
      >
        <!-- Sensitivity Analysis Controls -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Sensitivity Analysis - Variable Impact Testing
          </h3>
          
          <p class="text-sm text-gray-600 mb-4">
            Test how changes in key variables affect your 5-year Net Present Value (NPV) and Internal Rate of Return (IRR).
          </p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Variable 1 Controls -->
            <div class="border rounded-lg p-4">
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-3">Variable 1: Rent Prices</h4>
              <div class="mb-3">
                <label class="block text-xs text-gray-600 mb-1">Test Range</label>
                <div class="flex gap-2 items-center">
                  <input type="number" id="rent-min" value="-20" class="border rounded px-2 py-1 w-16 text-sm" />
                  <span class="text-xs">to</span>
                  <input type="number" id="rent-max" value="20" class="border rounded px-2 py-1 w-16 text-sm" />
                  <span class="text-xs text-gray-600">% change</span>
                </div>
              </div>
            </div>

            <!-- Variable 2 Controls -->
            <div class="border rounded-lg p-4">
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-3">Variable 2: Occupancy Rate</h4>
              <div class="mb-3">
                <label class="block text-xs text-gray-600 mb-1">Test Range</label>
                <div class="flex gap-2 items-center">
                  <input type="number" id="occupancy-min" value="70" class="border rounded px-2 py-1 w-16 text-sm" />
                  <span class="text-xs">to</span>
                  <input type="number" id="occupancy-max" value="95" class="border rounded px-2 py-1 w-16 text-sm" />
                  <span class="text-xs text-gray-600">%</span>
                </div>
              </div>
            </div>
          </div>

          <button 
            id="run-sensitivity-btn"
            class="mt-4 px-4 py-2 text-white" style="background: #78A1BB;" text-white rounded hover:bg-blue-700 transition-colors"
            onclick="console.log('Button clicked'); if(window.runSensitivityAnalysis) { window.runSensitivityAnalysis(); } else { alert('Function not found!'); }"
          >
            Run Sensitivity Analysis
          </button>
        </div>

        <!-- Sensitivity Results -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Sensitivity Results - NPV Impact
          </h3>
          <div id="sensitivity-chart" style="width: 100%; height: 400px"></div>
        </div>

        <!-- Sensitivity Summary Table -->
        <div class="p-4 rounded-lg border" style="background: #fff; opacity: 0.9;">
          <h3 class="text-lg font-medium text-gray-700" style="color: #e3721d" mb-4">
            Risk Assessment Summary
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Best Case Scenario</h4>
              <div class="bg-green-50 p-3 rounded">
                <div class="text-lg font-bold text-green-600" id="best-case-npv">‚Ç¨0</div>
                <p class="text-xs" style="color: #283044;"">NPV with favorable conditions</p>
              </div>
            </div>
            <div>
              <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Worst Case Scenario</h4>
              <div class="bg-red-50 p-3 rounded">
                <div class="text-lg font-bold text-red-600" id="worst-case-npv">‚Ç¨0</div>
                <p class="text-xs" style="color: #283044;"">NPV with unfavorable conditions</p>
              </div>
            </div>
          </div>
          
          <div class="mt-4">
            <h4 class="text-sm font-medium text-gray-700" style="color: #1e3a8a" mb-2">Key Insights</h4>
            <div id="sensitivity-insights" class="space-y-2 text-sm text-gray-700" style="color: #1e3a8a">
              <!-- Insights will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Check if Chart.js is loaded
        if (typeof Chart === "undefined") {
          console.error("Chart.js is not loaded");
        } else {
          console.log("Chart.js is loaded successfully");
        }
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
